{% extends "base.html" %}

{% block title %} Employee Management {% endblock %}

<!-- Main Content goes Here -->
{% block content %}
<!-- <div class="flash-wrapper">
{% with messages = get_flashed_messages() %}
{% if messages %}
{% for message in messages %}
<p class="alert alert-success alert-dismissible fade show">{{ message }}
    <button type="button" class="close" data-dismiss="alert" aria-label="Close" onClick="close('flash-wrapper')">
        <span aria-hidden="true">&times;</span>
</p>
{% endfor %}
{% endif %}
{% endwith %}
</div> -->
<h1 class="text-dark">Add Employee</h1>
<form action="/" method="POST"
    onsubmit="swal('Added employee Successfully', '', 'success').then(res => location.reload())">
    <div class="form-group">
        <label for="name">Employee Name:</label>
        <input type="text" name="name" id="name" class="form-control" required>
    </div>
    <div class="form-group">
        <label for="email">Employee Email:</label>
        <input type="email" name="email" id="email" class="form-control" required>
    </div>
    <div class="form-group">
        <label for="phone">Employee phone:</label>
        <input type="text" name="phone" id="phone" class="form-control" required>
    </div>
    <div class="form-group">
        <label for="desg">Employee designation:</label>
        <input type="text" name="desg" id="desg" class="form-control" required>
    </div>
    <div class="form-group">
        <button type="submit" class="btn btn-primary">Add Employee</button>
    </div>
</form>
<table class="table">
    <thead>
        <tr>
            <th>#</th>
            <th>Name</th>
            <th>Designation</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody class="tbody">
        {% for employee in employees %}
        <tr>
            <td>{{ loop.index }}</td>
            <td>{{ employee.name }}</td>
            <td>{{ employee.designation }}</td>
            <td>{{ employee.email }}</td>
            <td>{{ employee.phone }}</td>
            <td>
                <a href="/employee/update/{{ employee._id }}" class="btn btn-dark mb-md-2">Edit</a>
                <button onclick="deleteEmployee('{{ employee._id }}')" class="btn btn-danger mb-md-2">Delete</button>
            </td>
        </tr>

        {% endfor %}
    </tbody>
</table>
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="{{ url_for('static', filename='js/index.js') }}"></script>
{% endblock %}